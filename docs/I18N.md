# Internationalization (i18n) Guide

This document explains how to use and extend the internationalization (i18n) system in this React boilerplate.

## Overview

We use [react-i18next](https://react.i18next.com/) for internationalization, which provides:

- **Lazy loading** of translation files
- **Language detection** (localStorage → browser → fallback)
- **Namespace support** for organizing translations
- **React hooks** for easy integration

## Supported Languages

| Code | Language | Native Name |
|------|----------|-------------|
| `en` | English  | English     |
| `ko` | Korean   | 한국어       |
| `ne` | Nepali   | नेपाली       |

## Translation Namespaces

Translations are organized into namespaces to keep them manageable:

| Namespace    | Purpose                                    |
|-------------|--------------------------------------------|
| `common`    | Buttons, navigation, general UI elements   |
| `auth`      | Login, registration, authentication flows  |
| `validation`| Form validation error messages            |
| `dashboard` | Dashboard-specific content                 |

## File Structure

```
public/
└── locales/
    ├── en/
    │   ├── common.json
    │   ├── auth.json
    │   ├── validation.json
    │   └── dashboard.json
    ├── ko/
    │   ├── common.json
    │   ├── auth.json
    │   ├── validation.json
    │   └── dashboard.json
    └── ne/
        ├── common.json
        ├── auth.json
        ├── validation.json
        └── dashboard.json
```

## Usage

### Basic Translation with `useTranslation` Hook

```tsx
import { useTranslation } from "react-i18next";

function MyComponent() {
  // Use default namespace (common)
  const { t } = useTranslation();
  
  return <button>{t("buttons.save")}</button>;
}
```

### Using Multiple Namespaces

```tsx
import { useTranslation } from "react-i18next";

function LoginForm() {
  // Use auth namespace
  const { t } = useTranslation("auth");
  // Use common namespace with alias
  const { t: tCommon } = useTranslation("common");
  
  return (
    <form>
      <label>{t("fields.email")}</label>
      <button>{tCommon("buttons.submit")}</button>
    </form>
  );
}
```

### Translation with Variables (Interpolation)

```tsx
// JSON: { "welcome": "Welcome, {{name}}!" }
const { t } = useTranslation("dashboard");
t("welcome", { name: "John" }); // "Welcome, John!"

// JSON: { "showing": "Showing {{from}} to {{to}} of {{total}} results" }
const { t } = useTranslation("common");
t("table.pagination.showing", { from: 1, to: 10, total: 50 });
// "Showing 1 to 10 of 50 results"
```

### Changing Language Programmatically

```tsx
import { useTranslation } from "react-i18next";

function LanguageSelector() {
  const { i18n } = useTranslation();
  
  const changeLanguage = (lang: string) => {
    i18n.changeLanguage(lang);
    // Language is automatically persisted to localStorage
  };
  
  return (
    <select onChange={(e) => changeLanguage(e.target.value)}>
      <option value="en">English</option>
      <option value="ko">한국어</option>
      <option value="ne">नेपाली</option>
    </select>
  );
}
```

## Zod Validation with i18n

Zod validation messages are automatically translated. The configuration in `src/lib/zod-config.ts` handles this.

### How It Works

1. Zod's global error map is configured to use i18next
2. When validation fails, the error message is fetched from the `validation` namespace
3. Field names are automatically formatted from camelCase to Title Case

### Example Schema

```tsx
import { z } from "@/lib/zod-config";

const loginSchema = z.object({
  email: z.string().email(), // Will show translated email validation message
  password: z.string().min(8), // Will show translated min length message
});
```

### Translation Keys for Validation

| Key | Usage | Example Output |
|-----|-------|----------------|
| `required` | Required field | "Email is required" |
| `email` | Invalid email | "Please enter a valid email address" |
| `min` | Minimum length | "Password must be at least 8 characters" |
| `max` | Maximum length | "Name must be at most 50 characters" |

## Adding a New Language

1. **Create the locale folder:**
   ```bash
   mkdir public/locales/ja  # For Japanese
   ```

2. **Copy existing translation files:**
   ```bash
   cp public/locales/en/*.json public/locales/ja/
   ```

3. **Translate the JSON content:**
   Edit each JSON file with translations for the new language.

4. **Register the language in i18n config:**
   ```ts
   // src/lib/i18n.ts
   export const supportedLanguages = [
     { code: "en", name: "English", nativeName: "English" },
     { code: "ko", name: "Korean", nativeName: "한국어" },
     { code: "ne", name: "Nepali", nativeName: "नेपाली" },
     { code: "ja", name: "Japanese", nativeName: "日本語" }, // Add new language
   ] as const;
   ```

## Adding New Translation Keys

### Naming Convention

Use the pattern: `page.section.key` or `category.subcategory.key`

```json
{
  "dashboard": {
    "stats": {
      "totalUsers": "Total Users",
      "activeProjects": "Active Projects"
    }
  }
}
```

### Steps

1. **Add the key to all language files:**
   Ensure the key exists in every locale (en, ko, ne, etc.)

2. **Use meaningful hierarchical keys:**
   ```json
   // ✅ Good
   { "user.profile.title": "Your Profile" }
   
   // ❌ Avoid
   { "title1": "Your Profile" }
   ```

3. **Keep translations consistent:**
   Maintain the same key structure across all language files.

## Language Switcher Component

A pre-built `LanguageSwitcher` component is available:

```tsx
import { LanguageSwitcher } from "@/components/ui/LanguageSwitcher";

function Header() {
  return (
    <header>
      <LanguageSwitcher />
      {/* or with label */}
      <LanguageSwitcher showLabel />
    </header>
  );
}
```

## Best Practices

1. **Always use translation keys**, never hardcode user-facing text
2. **Group related translations** using nested objects
3. **Use interpolation** for dynamic values instead of string concatenation
4. **Keep keys descriptive** but concise
5. **Add translations to all languages** when adding new keys
6. **Test with different languages** to ensure layout works with varying text lengths

## Configuration Reference

The i18n configuration is located at `src/lib/i18n.ts`:

```ts
import i18n from "i18next";
import { initReactI18next } from "react-i18next";
import LanguageDetector from "i18next-browser-languagedetector";
import HttpBackend from "i18next-http-backend";

i18n
  .use(HttpBackend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    fallbackLng: "en",
    supportedLngs: ["en", "ko", "ne"],
    defaultNS: "common",
    ns: ["common", "auth", "validation", "dashboard"],
    detection: {
      order: ["localStorage", "navigator", "htmlTag"],
      lookupLocalStorage: "i18nextLng",
      caches: ["localStorage"],
    },
    backend: {
      loadPath: "/locales/{{lng}}/{{ns}}.json",
    },
    interpolation: {
      escapeValue: false,
    },
  });
```

## Troubleshooting

### Translation Not Showing

1. Check if the key exists in the JSON file
2. Verify the namespace is correct
3. Check browser console for loading errors

### Language Not Switching

1. Verify the language code is in `supportedLngs`
2. Check localStorage for the `i18nextLng` key
3. Clear browser cache and localStorage

### Zod Errors Not Translated

1. Ensure `src/lib/i18n.ts` is imported before any Zod usage
2. Check that validation namespace is loaded
3. Verify the translation keys match the Zod error types
